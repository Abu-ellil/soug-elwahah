# نظام الموافقة على المتاجر

## كيفية عمل نظام الموافقة

عند إنشاء متجر جديد في النظام، يمر المتجر بعملية تحقق وموافقة تضمن جودة وسلامة المتاجر في النظام.

### خطوات إنشاء المتجر وعملية الموافقة:

1. **إنشاء المتجر**:

   - عندما يقوم صاحب متجر بتسجيل حساب ومتجر جديد، يتم إنشاء المتجر بحالة "في الانتظار" (pending)
   - كلا من حساب صاحب المتجر والمتجر نفسه يكونان غير نشطين (isActive = false)
   - يتم عرض رسالة للمستخدم تفيد بأن الحساب في انتظار موافقة الإدارة

2. **لوحة التحكم للإدارة**:

   - يمكن للإدارة الوصول إلى المتاجر المعلقة من خلال صفحة "إدارة المتاجر" في لوحة التحكم
   - تظهر المتاجر المعلقة في تبويب "في الانتظار" أو مع تصفية الحالة إلى "في الانتظار"
   - يمكن للإدارة مراجعة تفاصيل كل متجر قبل اتخاذ قرار الموافقة أو الرفض

3. **عملية الموافقة أو الرفض**:
   - عند الموافقة: يتم تفعيل المتجر وحساب صاحب المتجر، ويصبح المتجر نشطًا وقابلاً للاستخدام في النظام
   - عند الرفض: يبقى الحساب والمتجر غير نشطين، ويمكن إبلاغ صاحب المتجر بالسبب

## الفروق بين حالات المتجر

### 1. المتجر المعلق (Pending)

- **الحالة**: verificationStatus = "pending"
- **النشاط**:.isActive = false
- **القدرة على العمل**: لا يمكن المتجر من العمل في النظام
- **الظهور للعملاء**: لا يظهر في نتائج البحث أو في القائمة العامة للمتاجر
- **وصول صاحب المتجر**: يمكن لصاحب المتجر الدخول إلى حسابه ولكن مع قيود على الوظائف
- **الإشعارات**: لا يreceive إشعارات خاصة بالموافقة حتى تتم عملية المراجعة

### 2. المتجر الموافق عليه (Approved)

- **الحالة**: verificationStatus = "approved"
- **النشاط**: isActive = true
- **القدرة على العمل**: يمكن المتجر من العمل بشكل طبيعي في النظام
- **الظهور للعملاء**: يظهر في نتائج البحث ويكون متاحًا للعملاء
- **وصول صاحب المتجر**: يمكن لصاحب المتجر الوصول الكامل إلى لوحة التحكم وإدارة المتجر
- **الإشعارات**: يreceive إشعار تأكيد الموافقة

### 3. المتجر المرفوض (Rejected)

- **الحالة**: verificationStatus = "rejected"
- **النشاط**: isActive = false
- **القدرة على العمل**: لا يمكن المتجر من العمل في النظام
- **الظهور للعملاء**: لا يظهر في نتائج البحث أو في القائمة العامة للمتاجر
- **وصول صاحب المتجر**: لا يمكن لصاحب المتجر من استخدام الحساب بشكل فعّال
- **الإشعارات**: يreceive إشعار بالرفض مع السبب إن وُجد

## الميزات المضافة

### نظام الإشعارات:

- عند الموافقة: يreceive صاحب المتجر إشعارًا يفيد بقبول متجره وتفعيله
- عند الرفض: يreceive صاحب المتجر إشعارًا يفيد برفض متجره مع السبب
- يمكن لصاحب المتجر عرض الإشعارات من خلال واجهة التطبيق

### الأمان:

- يتم تعطيل الحساب حتى موافقة الإدارة لضمان مراجعة جميع المتاجر الجديدة
- يضمن النظام جودة المتاجر وحماية المستخدمين من المتاجر غير الموثوقة
- يوفر للإدارة تحكمًا كاملاً في المتاجر الموجودة في النظام

## مثال على تدفق العملية:

1. صاحب المتجر يسجل حسابًا جديدًا → المتجر في حالة "pending"
2. الإدارة تراجع المتجر → تظهر تفاصيل المتجر في لوحة التحكم
3. الإدارة تقرر الموافقة → المتجر يصبح "approved" ونشط
4. صاحب المتجر يreceive إشعار بالموافقة → يمكنه الآن استخدام المتجر بشكل كامل
